!function(t){function e(e){for(var o,s,a=e[0],c=e[1],u=e[2],h=0,p=[];h<a.length;h++)s=a[h],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);for(l&&l(e);p.length;)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(o=!1)}o&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},r={0:0},i=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="./";var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var l=c;i.push(["zUnb",1]),n()}({FN2D:function(t,e,n){"use strict";n("FYqo")},FYqo:function(t,e,n){},Olfa:function(t,e,n){},P5HX:function(t,e,n){"use strict";n("Olfa")},RnhZ:function(t,e,n){var o={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn-bd":"loYQ","./bn-bd.js":"loYQ","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-in":"7C5Q","./en-in.js":"7C5Q","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./en-sg":"t+mt","./en-sg.js":"t+mt","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-mx":"tbfe","./es-mx.js":"tbfe","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fil":"1ppg","./fil.js":"1ppg","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./ga":"USCx","./ga.js":"USCx","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-deva":"qvJo","./gom-deva.js":"qvJo","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it-ch":"bxKX","./it-ch.js":"bxKX","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ku":"JCF/","./ku.js":"JCF/","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./oc-lnc":"Fnuy","./oc-lnc.js":"Fnuy","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tk":"Wv91","./tk.js":"Wv91","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-mo":"OmwH","./zh-mo.js":"OmwH","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function r(t){var e=i(t);return n(e)}function i(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id="RnhZ"},XAuw:function(t,e,n){"use strict";n("qThM")},m2JT:function(t,e,n){"use strict";Math.sinh=function(t){return(Math.exp(t)-Math.exp(-t))/2},Math.cosh=function(t){return Math.pow(Math.E,t)+Math.pow(Math.E,-t)/2},Math.sign=function(t){return t>=0?1:-1}},qThM:function(t,e,n){},s1ma:function(t,e,n){},sRdh:function(t,e,n){"use strict";n("s1ma")},zUnb:function(t,e,n){"use strict";n.r(e);var o,r,i,s=n("YKMj"),a=n("oCYn"),c=n("L+H0"),u=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="App",e}return u(e,t),e=l([Object(c.b)({})],e)}(a.default),p=(n("XAuw"),n("KHd+")),d=Object(p.a)(h,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)}),[],!1,null,null,null).exports,m=n("L2JU"),f=149597870,y=2*Math.PI,g=Math.PI/2,b=Math.PI/180,v=(Math.PI,86400),w=new Date("2000-01-01T12:00:00-00:00"),j=n("Womt"),P="static/images/surface/",C={id:"solarSystemScene",name:"Solar System",system:{id:"solarSystem",name:"Solar System",type:"starsystem",star:{id:"sun",name:"The Sun",mass:1.9891e30,radius:696342,sideralDay:2211840,k:.01720209895,orbit:{base:{a:0,e:0,i:0,l:0,lp:0,o:0},cy:{a:0,e:0,i:0,l:0,lp:0,o:0}},material:{emissive:new j.i(14540083),color:"#ffff00",map:P+"sun.jpg"}},planets:[{id:"mercury",name:"Mercury",mass:33022e19,radius:2439,sideralDay:5067014.4,orbit:{base:{a:.38709927*f,e:.20563593,i:7.00497902,l:252.2503235,lp:77.45779628,o:48.33076593},cy:{a:37e-8*f,e:1906e-8,i:-.00594749,l:149472.67411175,lp:.16047689,o:-.12534081}},material:{color:"#588a7b",map:P+"mercury.jpg"}},{id:"venus",name:"Venus",mass:4868e21,radius:6051,tilt:177.4,sideralDay:20997360,orbit:{base:{a:.72333566*f,e:.00677672,i:3.39467605,l:181.9790995,lp:131.60246718,o:76.67984255},cy:{a:583.431693,e:-4107e-8,i:-7889e-7,l:58517.81538729,lp:.00268329,o:-.27769418}},material:{color:"#fda700",map:P+"venus.jpg"}},{id:"earth",name:"The Earth",mass:59736e20,radius:6378.1596564,tilt:23+26/60+21/3600,sideralDay:86164.09056,atmosphere:{atmospherePressure:101.325,components:[{id:"N",name:"Nitrogen",ratio:78.08},{id:"O2",name:"Oxygen",ratio:20.95},{id:"Ar",name:"Argon",ratio:.93},{id:"CO2",name:"Carbon Dioxide",ratio:.038},{id:"etc",name:"Etc",ratio:.002}]},orbit:{base:{a:1.00000261*f,e:.01671123,i:-1531e-8,l:100.46457166,lp:102.93768193,o:0},cy:{a:840.7400294,e:-4392e-8,i:-.01294668,l:35999.37244981,lp:.32327364,o:0}},material:{color:"#1f7cda",map:P+"earth.jpg"}},{id:"mars",name:"Mars",mass:64185e19,radius:3376,tilt:25.19,sideralDay:88642.6848,atmosphere:{atmospherePressure:.636,components:[{id:"CO2",name:"Carbon Dioxide",ratio:95.97},{id:"N",name:"Nitrogen",ratio:1.89},{id:"Ar",name:"Argon",ratio:1.93},{id:"O2",name:"Oxygen",ratio:.146},{id:"etc",name:"etc",ratio:.064}]},orbit:{base:{a:1.52371034*f,e:.0933941,i:1.84969142,l:-4.55343205,lp:-23.94362959,o:49.55953891},cy:{a:2763.0726589,e:7882e-8,i:-.00813131,l:19140.30268499,lp:.44441088,o:-.29257343}},material:{color:"#ff3300",map:P+"mars.jpg"}},{id:"jupiter",name:"Jupiter",mass:18986e23,radius:71492,tilt:3.13,sideralDay:35700,orbit:{base:{a:5.202887*f,e:.04838624,i:1.30439695,l:34.39644051,lp:14.72847983,o:100.47390909},cy:{a:-11607e-8*f,e:-13253e-8,i:-.00183714,l:3034.74612775,lp:.21252668,o:.20469106}},material:{color:"#ff9932",map:P+"jupiter.jpg"}},{id:"saturn",name:"Saturn",mass:56846e22,radius:58232,tilt:26.7,sideralDay:39e3,ring:{innerRadius:74500,outerRadius:117580,map:P+"saturn-ring.png"},orbit:{base:{a:9.53667594*f,e:.05386179,i:2.48599187,l:49.95424423,lp:92.59887831,o:113.66242448},cy:{a:-.0012506*f,e:-50991e-8,i:.00193609,l:1222.49362201,lp:-.41897216,o:-.28867794}},material:{color:"#ffcc99",map:P+"saturn.jpg"}},{id:"uranus",name:"Uranus",mass:8681e22,radius:25559,tilt:97.77,sideralDay:61200,orbit:{base:{a:19.18916464*f,e:.04725744,i:.77263783,l:313.23810451,lp:170.9542763,o:74.01692503},cy:{a:-.00196176*f,e:-4397e-8,i:-.00242939,l:428.48202785,lp:.40805281,o:.04240589}},material:{color:"#99ccff",map:P+"uranus.jpg"}},{id:"Neptune",name:"neptune",mass:10243e22,radius:24764,tilt:28.32,sideralDay:57600,orbit:{base:{a:30.06992276*f,e:.00859048,i:1.77004347,l:-55.12002969,lp:44.96476227,o:131.78422574},cy:{a:39330.7760017,e:5105e-8,i:35372e-8,l:218.45945325,lp:-.32241464,o:-.00508664}},material:{color:"#3299ff",map:P+"neptune.jpg"}},{id:"pluto",name:"Pluto",mass:1457e19,radius:1153,sideralDay:551856.672,orbit:{base:{a:39.48211675*f,e:.2488273,i:17.14001206,l:238.92903833,lp:224.06891629,o:110.30393684},cy:{a:-47266.9430052,e:517e-7,i:4818e-8,l:145.20780515,lp:-.04062942,o:-.01183482}},material:{color:"#aaaaaa",map:P+"pluto.jpg"}}]},startDate:new Date,secondsPerTick:2592e4,calcPerTick:1},O=function(){this.scenarios=[],this.scenarios=[C],this.currentScenario=this.scenarios[0],this.isPlaying=!1,this.currentDate=new Date,this.currentCameraPosition="root",this.timesets=[{time:10,name:"Real-time"},{time:36e3,name:"Hour/s"},{time:864e3,name:"Day/s"},{time:2592e4,name:"Month/s"},{time:15552e4,name:"6Months/s"},{time:31104e4,name:"Year/s"}]},S={},M=((r={})["viewer/GET_CURRENT_SCENARIO_SECONDS_PER_TICK"]=function(t){return t.currentScenario.secondsPerTick},r),E=((i={})["viewer/SET_PLAYING"]=function(t,e){t.isPlaying=e},i["viewer/SET_CURRENT_DATE"]=function(t,e){t.currentDate=e},i["viewer/SET_CURRENT_CAMERA_POSITION"]=function(t,e){t.currentCameraPosition=e},i["viewer/SET_CURRENT_SCENARIO_SECONDS_PER_TICK"]=function(t,e){t.currentScenario.secondsPerTick=e},i),D=function(){this.getters=M,this.mutations=E,this.actions=S,this.state=new O};a.default.use(m.a);var T=new m.a.Store({modules:{viewer:new D}}),k=n("jE9Z"),_=n("X1uE"),x=n("S7WH"),R=n("S+eF"),z=new(function(){function t(){this.shaders=[]}return t.prototype.load=function(){var t=R.defer();return this.shaders=["varying vec3 vNormal;\nvoid main() {\n    vNormal = normalize( normalMatrix * normal );\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n","uniform vec3 glowColor;\nvarying vec3 vNormal;\n\nvoid main() {\n\tfloat intensity = pow( 0.5 - dot( vNormal, vec3( 0.0, 0.0, 1.0 ) ), 4.0 );\n\tvec3 glow = glowColor * intensity;\n    gl_FragColor = vec4( glow, 1.0 );\n}\n"],t.resolve(),t.promise},t.prototype.getShaders=function(){return this.shaders},t.prototype.getVertexShader=function(){return this.shaders[0]},t.prototype.getFregmentShader=function(){return this.shaders[1]},t.prototype.removeShaders=function(){this.shaders=[]},t}()),I=n("EVdn"),A=n("z6Jv"),L=new(function(){function t(){this.scale=1}return t.prototype.setLargestDimension=function(t){this.scale=1e3/t},t.prototype.getScaledVector=function(t){return t.multiplyScalar(this.scale)},t.prototype.getScaled=function(t){return t*this.scale},t}()),B=function(){function t(t,e){this.centerVector=new j.M,this.name=t+"-label",this.planetName=e,this.position=new j.M,this.elementString='<div class="planet-label"><h3>'+e+"</h3></div>",this.elementDOM=I(this.elementString),this.elementDOM.appendTo(I("#renderer"))}return t.prototype.updatePosition=function(t,e){this.position=t.clone(),this.position2d=this.get2DPosition(e),this.setElementPosition(this.position2d)},t.prototype.setElementPosition=function(t){var e={transform:"translate("+(t.x-20)+"px, "+(t.y-20)+"px) scale("+t.z+")",opacity:1};this.elementDOM.css(e)},t.prototype.get2DPosition=function(t){var e=this.position.clone(),n=e.project(t),o=window.innerWidth,r=window.innerHeight;if(n.x=(n.x+1)/2*o,n.y=-(n.y-1)/2*r,n.z<1&&n.x>0&&n.x<o&&n.y>0&&n.y<r){var i=t.position.distanceTo(e),s=Math.atan(t.fov/2)*i,a=1/(1+Math.log10(s));return n.z=.3+a,n}return this.centerVector},t}(),N=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,r++)o[r]=i[s];return o},V=function(){function t(e){this.id=e.id,this.name=e.name,this.mass=e.mass,this.radius=e.radius,this.renderedRadius=0,this.material=e.material,this.sideralDay=e.sideralDay,t.bodyQuality.segment=50,t.bodyQuality.rings=50,this.root=new j.y,this.root.name=this.id,this.position=new j.M,this.compressedPos=new j.M,this.bodyId=this.id+"-body",this.helperId=this.id+"-axis-helper",this.ringId=this.id+"-ring",this.labelManager=new B(this.id,this.name),this.createObjectBasicBody()}return t.prototype.get3DBody=function(){return this.root},t.prototype.setShowHelper=function(t){var e=this.body.getObjectByName(this.helperId);e?e.visible=t:console.error("There is no axis helper in this Astronomical Object")},t.prototype.getObjectCompressedSize=function(){var t=1e3*this.radius;return L.getScaled(t)},t.prototype.getObjectStageSize=function(){return this.getObjectCompressedSize()*this.body.getObjectByName("mesh").scale.x},t.prototype.moveRotating=function(t){this.body.getObjectByName("mesh").rotation.y=t.getTime()/this.sideralDay*y},t.prototype.createObjectBasicBody=function(){var e=Object.assign({},this.material),n=t.bodyQuality.segment,o=t.bodyQuality.rings;this.renderedRadius=this.getObjectCompressedSize(),this.body=new j.y,e.map&&(e.map=(new j.K).load(e.map));var r=new j.I(this.renderedRadius,n,o),i=new j.w(e);i.color=new j.i(16777215);var s=new j.u(r,i);s.name="mesh",this.body.add(s),this.body.name=this.bodyId,this.setHelper()},t.prototype.setHelper=function(){var t=new j.g,e=new j.s({color:65280}),n=(new j.M).toArray(),o=new j.M(0,2*this.getObjectCompressedSize(),0).toArray();t.setAttribute("position",new j.n(N(n,o),3));var r=new j.r(t,e);r.name=this.helperId,this.body.getObjectByName("mesh").add(r)},t.bodyQuality={segment:0,rings:0},t}(),F=function(){function t(t){this.components=[],this.components=t}return t.prototype.getAllComponents=function(){return this.components},t.prototype.getComponentsById=function(t){return this.components.filter((function(e){return e.id===t}))[0]},t.prototype.getHighestRateComponent=function(){},t.prototype.getLowestRateComponent=function(){},t}(),Y=new(function(){function t(){}return t.prototype.getEccentricity=function(t,e,n){for(var o=0;o<n;o++)e=t(e);return e},t.prototype.computeLaguerre=function(t,e,n,o){return t+-5*e/(n+Math.sign(n)*Math.sqrt(Math.abs(16*n*n-20*e*o)))},t.prototype.compute=function(t,e){return function(n){return n+(e+t*Math.sin(n)-n)/(1-t*Math.cos(n))}},t.prototype.computeWithLaguerre=function(t,e){var n=this;return function(o){var r=t*Math.sin(o),i=t*Math.cos(o),s=o-r-e,a=1-i,c=r;return n.computeLaguerre(o,s,a,c)}},t.prototype.computeWithLaguerreHyp=function(t,e){var n=this;return function(o){var r=t*Math.sinh(o),i=t*Math.cosh(o),s=o-r-e,a=i-1,c=r;return n.computeLaguerre(o,s,a,c)}},t}()),U=function(){function t(t){this.computedPosition=new j.M,this.defaultPosition=new j.M,this.euler1=new j.l,this.euler2=new j.l,this.quaternion1=new j.C,this.quaternion2=new j.C,this.multiplyQuaternion=new j.C,this.orbitData=t}return t.prototype.setName=function(t){this.name=t},t.prototype.getPosFromElements=function(t){if(!t)return this.defaultPosition;var e=this.euler1.set(t.tilt||0,0,t.o,"XYZ"),n=this.euler2.set(t.i,0,t.w,"XYZ"),o=this.quaternion1.setFromEuler(e),r=this.quaternion2.setFromEuler(n),i=this.multiplyQuaternion.multiplyQuaternions(o,r);return t.pos.applyQuaternion(i),t.pos},t.prototype.calcElements=function(t){if(!this.orbitData)throw new Error("There is no orbit data in this Orbit manager");var e,n=this.orbitData,o=t.getTime()/v/36525,r={};n.base?r=Object.keys(n.base).reduce((function(t,r){return e=n.cy?n.cy[r]:n.day?36525*n.day[r]:0,t[r]=n.base[r]+e*o,t}),r):r=I.extend({},n);return r.w||(r.w=r.lp-r.o),r.M||(r.M=r.l-r.lp),r.a*=1e3,r.i*=b,r.o*=b,r.w*=b,r.M*=b,r.E=this.getEccentricAnomaly(r.e,r.M),r.E%=y,r.i%=y,r.o%=y,r.w%=y,r.M%=y,this.computedPosition.set(r.a*(Math.cos(r.E)-r.e),r.a*Math.sqrt(1-Math.pow(r.e,2))*Math.sin(r.E),0),r.pos=this.computedPosition,r.r=r.pos.length(),r.v=Math.atan2(r.pos.y,r.pos.x),r},t.prototype.calcPosition=function(t){if(!this.orbitData)return new j.M;var e=this.calcElements(t);return this.getPosFromElements(e)},t.prototype.getEccentricAnomaly=function(t,e){if(0>=t)return e;if(0<t&&t<.9)return Y.getEccentricity(Y.compute(t,e),e,6);if(.9<=t&&t<1){var n=e+.85*t*Math.sign(Math.sin(e));return Y.getEccentricity(Y.computeWithLaguerre(t,e),n,8)}return 1<=t?e:void 0},t}(),H=new(function(){function t(){}return t.prototype.hexToRgb=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(!e||!e.length)throw new Error(t+" is not hex color format!");return{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}},t.prototype.rgbToHex=function(t){return((t.r<<16)+(t.g<<8)+t.b).toString()},t.prototype.darken=function(t,e){var n=Object.assign({},t),o=1-e;return Object.keys(t).forEach((function(t){return n[t]*=o})),n},t}()),Q=function(){function t(t,e,n){this.vertices=[],this.name=t+"-trace",this.color=e,this.maxLength=n,this.createTrace()}return t.prototype.getTracer=function(){if(!this.trace)throw new Error("You must create "+this.name+" Trace first :: getTracer");return this.trace},t.prototype.updateTrace=function(t){var e=this;if(!this.trace)throw new Error("There is no trace in "+this.name+"! :: updateTrace");this.vertices.push(t.clone()),this.vertices.length>this.maxLength&&this.vertices.shift();var n=3*this.vertices.length,o=new Float32Array(n),r=new Float32Array(n),i=H.hexToRgb(this.color);this.vertices.forEach((function(t,n){o[n*=3]=t.x,o[n+1]=t.y,o[n+2]=t.z;var s=1-n/e.vertices.length,a=H.darken(i,s);r[n]=a.r/255,r[n+1]=a.g/255,r[n+2]=a.b/255}));var s=new j.f(o,3),a=new j.f(r,3);this.geometry.addAttribute("position",s),this.geometry.addAttribute("color",a),this.geometry.attributes.position.needsUpdate=!0},t.prototype.createTrace=function(){var t=new j.g;t.addAttribute("position",new j.f(new Float32Array(0),3)),t.addAttribute("color",new j.f(new Float32Array(0),3));var e=new j.s({vertexColors:!0}),n=new j.r(t,e);this.geometry=t,this.trace=n,this.trace.name=this.name},t}(),Z=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),W=function(t){function e(e){var n=this,o={id:e.id,name:e.name,mass:e.mass,radius:e.radius,material:e.material,sideralDay:e.sideralDay};e.sideralDay&&(o.sideralDay=e.sideralDay),(n=t.call(this,o)||this).orbitManager=new U(e.orbit),n.angle=0,n.force=new j.M,n.movement=new j.M,n.prevPosition=new j.M,n.relPosition=new j.M,n.absVelocity=new j.M,n.relVelocity=new j.M;var r=1.6+Math.PI*L.getScaled(e.orbit.base.a);return n.traceManager=new Q(e.id,e.material.color,Math.pow(r,10)),n.hasTrace=!1,e.atmosphere&&(n.atmospherePressure=e.atmosphere.atmospherePressure,n.atmosphere=new F(e.atmosphere.components)),e.ring&&(n.ring=e.ring),e.tilt&&(n.tilt=e.tilt),n.setPlanetBody(),n}return Z(e,t),e.prototype.setPlanetBody=function(){if(this.ring){var t=L.getScaled(this.ring.innerRadius),e=L.getScaled(this.ring.innerRadius),n=new j.w({map:(new j.K).load(this.ring.map),transparent:!0,side:j.k}),o=new j.G(e,t,20),r=new j.u(o,n);r.rotation.x=-1*g,r.name=this.ringId,this.body.add(r)}var i=g;this.tilt&&(i-=this.tilt*b),this.body.getObjectByName("mesh").rotation.x=i,this.root.add(this.body),this.root.add(this.traceManager.getTracer())},e.prototype.getPlanetRoot=function(){return this.root},e.prototype.getPlanetBody=function(){return this.body},e.prototype.setPositionByDate=function(t){this.prevPosition=this.position.clone(),this.position=this.orbitManager.calcPosition(t),this.compressedPos=this.getPosition(),this.relPosition=this.position.clone();var e=this.compressedPos.x,n=this.compressedPos.y,o=this.compressedPos.z;this.body.position.set(e,n,o),this.hasTrace&&this.traceManager.updateTrace(this.body.position)},e.prototype.getPosition=function(){var t=this.position.clone();return L.getScaledVector(t)},e.prototype.getScreenSizeRatio=function(t,e){var n=this.getObjectStageSize(),o=this.getPosition().sub(t).length();return n/(2*Math.tan(e*b/2)*o)},e.prototype.reset=function(){this.angle=0,this.force=new j.M,this.movement=new j.M,this.prevPosition=new j.M},e}(V),X=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),K=function(t){function e(e){var n=this,o={id:e.id,name:e.name,mass:e.mass,radius:e.radius,material:e.material,sideralDay:e.sideralDay,orbit:e.orbit};return(n=t.call(this,o)||this).flareSize=100,n.flareMapResource="static/images/effect/lensflare.png",n.setStarBody(),n.setFlare(),n.setLight(),n}return X(e,t),e.prototype.setFlareSize=function(t,e){this.flareSize=t*e*30},e.prototype.setFlarePosition=function(t){this.lensFlare.position.copy(t)},e.prototype.getScreenSizeRatio=function(t,e){var n=this.getObjectStageSize(),o=(new j.M).sub(t).length();return n/(2*Math.tan(e*b/2)*o)},e.prototype.setStarBody=function(){this.root.add(this.body)},e.prototype.setFlare=function(){var t=new j.i(16777215);t.setHSL(.57,.8,.97);var e=this.flareSize;this.flareMap=(new j.K).load(this.flareMapResource);var n=new A.a;n.addElement(new A.b(this.flareMap,e,0,t));var o=new j.B(16777215,1.5,100);o.add(n),this.lensFlare=o,this.root.add(o)},e.prototype.setLight=function(){var t=new j.B(16777215);this.root.add(t)},e}(W),J=function(t,e,n){this.id=t,this.name=e,this.type=n,this.root=new j.y},q=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),G=function(t){function e(e){var n=t.call(this,e.id,e.name,e.type)||this;return n.planets=[],n.star=new K(e.star),e.planets.forEach((function(t){return n.planets.push(new W(t))})),n}return q(e,t),e.prototype.getCenter=function(){return this.star},e.prototype.getCenterBody=function(){return this.star.get3DBody()},e.prototype.getPlanets=function(){return this.planets},e.prototype.getPlanetById=function(t){return this.planets.filter((function(e){return e.id===t}))[0]},e.prototype.getPlanetByName=function(t){return this.planets.filter((function(e){return e.name===t}))[0]},e.prototype.getPlanetBodies=function(){var t=[];return this.planets.forEach((function(e){return t.push(e.get3DBody())})),t},e.prototype.setPlanetsPosition=function(){var t=new Date;this.planets.forEach((function(e){return e.setPositionByDate(t)}))},e}(J),$=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),tt=function(t){function e(e){var n=t.call(this,e.id,e.name,e.type)||this;return n.moons=[],n.centralPlanet=new W(e.centralPlanet),e.moons.forEach((function(t){return n.moons.push(new W(t))})),n}return $(e,t),e.prototype.getCenter=function(){return this.centralPlanet},e.prototype.getCenterBody=function(){return this.centralPlanet.get3DBody()},e.prototype.getMoons=function(){return this.moons},e.prototype.getMoonById=function(t){return this.moons.filter((function(e){return e.id===t}))[0]},e.prototype.getMoonByName=function(t){return this.moons.filter((function(e){return e.name===t}))[0]},e.prototype.getMoonBodies=function(){var t=[];return this.moons.forEach((function(e){return t.push(e.get3DBody())})),t},e.prototype.setMoonsPosition=function(){var t=new Date;this.moons.forEach((function(e){return e.setPositionByDate(t)}))},e}(J),et=function(){function t(t){this.id=t.id,this.name=t.name,this.systemType=t.system.type,this.startDate=t.startDate,this.secondsPerTick=t.secondsPerTick,this.calcPerTick=t.calcPerTick,this.setSystem(t.system)}return t.prototype.getStartDate=function(){return this.startDate},t.prototype.getSecondsPerTick=function(){return this.secondsPerTick},t.prototype.getCalcPerTick=function(){return this.calcPerTick},t.prototype.getBodies=function(){if(!this.system)throw new Error("There is no system in this Scenario! : Scenario::getBodies");var t;if("starsystem"===this.system.type)return{center:(t=this.system).getCenterBody(),others:t.getPlanetBodies(),type:t.type};if("planetsystem"===this.system.type)return{center:(t=this.system).getCenterBody(),others:t.getMoonBodies(),type:t.type};throw new Error("invalid system type: Scenario::getBodies")},t.prototype.getAstronomicalObjects=function(){if(!this.system)throw new Error("There is no system in this Scenario! : Scenario::getBodies");var t=this.system;if("starsystem"===this.system.type)return{center:(t=t).getCenter(),others:t.getPlanets(),type:t.type};if("planetsystem"===this.system.type)return{center:(t=t).getCenter(),others:t.getMoons(),type:t.type};throw new Error("invalid system type: Scenario::getAstronomicalObjects")},t.prototype.setSystem=function(t){if("starsystem"===t.type)this.system=new G(t),this.system.setPlanetsPosition();else{if("planetsystem"!==t.type)throw new Error("Please check your scenario type: Scenario Class");this.system=new tt(t),this.system.setMoonsPosition()}},t}(),nt=45,ot=.001,rt=(new j.M,function(){function t(t,e,n,o,r){void 0===o&&(o=nt),void 0===r&&(r=ot),this.allCams=[],this.defaultVector=new j.M,this.scene=t,this.cameraConfig={fov:o,aspect:n,near:r,far:100*e},this.stageSize=e,this.allCams=[]}return t.prototype.init=function(){this.globalCamera=this.createCamera("mainCam"),this.globalCamera.position.set(0,-1,this.getDistanceFromFov(this.stageSize,this.globalCamera.fov)),this.globalCamera.lookAt(this.defaultVector),this.scene.add(this.globalCamera)},t.prototype.createCamera=function(t){var e=this.cameraConfig,n=e.fov,o=e.aspect,r=e.near,i=e.far,s=new j.A(n,o,r,i);return s.name=t,s.up=new j.M(0,0,1),this.allCams.push(s),this.currentCamera=s,s},t.prototype.getCurrentCamera=function(){return this.currentCamera},t.prototype.setCameraPosition=function(t,e,n){var o=this.currentCamera;if("root"===e?this.scene.remove(o):this.scene.getObjectByName(e).remove(o),"root"===n)this.scene.add(o),this.initCurrentCameraPosition();else{var r=t.system,i=void 0;if("starsystem"===r.type)i=(r=r).getPlanetById(n);else{if(!t)throw new Error("There is no "+r.type+" in system types");i=(r=r).getMoonById(n)}var s=10*i.renderedRadius;i.getPlanetBody().add(o),o.position.set(s,s,s)}},t.prototype.initCurrentCameraPosition=function(){this.currentCamera.position.set(0,this.stageSize/2,this.stageSize/2)},t.prototype.getAbsolutePosition=function(){return this.currentCamera.parent.localToWorld(this.currentCamera.position.clone())},t.prototype.getConfig=function(){return this.cameraConfig},t.prototype.getDistanceFromFov=function(t,e){return t*Math.atan(2*e*b)},t}()),it=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),st=-1,at=0,ct=1,ut=2,lt=3,ht=4,pt=5,dt={type:"change"},mt={type:"start"},ft={type:"end"},yt=function(t){function e(e,n,o){var r=t.call(this)||this;return r.object=e,r.domElement=void 0!==n?n:document,r.window=void 0!==o?o:window,r.enabled=!0,r.target=new j.M,r.minDistance=0,r.maxDistance=1/0,r.minZoom=0,r.maxZoom=1/0,r.minPolarAngle=0,r.maxPolarAngle=Math.PI,r.minAzimuthAngle=-1/0,r.maxAzimuthAngle=1/0,r.enableDamping=!1,r.dampingFactor=.25,r.enableZoom=!0,r.zoomSpeed=1,r.enableRotate=!0,r.rotateSpeed=1,r.enablePan=!0,r.keyPanSpeed=7,r.autoRotate=!1,r.autoRotateSpeed=2,r.enableKeys=!0,r.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},r.mouseButtons={ORBIT:j.t.LEFT,ZOOM:j.t.MIDDLE,PAN:j.t.RIGHT},r.target0=r.target.clone(),r.position0=r.object.position.clone(),r.zoom0=r.object.zoom,r.updateOffset=new j.M,r.updateQuat=(new j.C).setFromUnitVectors(e.up,new j.M(0,1,0)),r.updateQuatInverse=r.updateQuat.clone().inverse(),r.updateLastPosition=new j.M,r.updateLastQuaternion=new j.C,r.state=st,r.scale=1,r.spherical=new j.J,r.sphericalDelta=new j.J,r.panOffset=new j.M,r.zoomChanged=!1,r.rotateStart=new j.L,r.rotateEnd=new j.L,r.rotateDelta=new j.L,r.panStart=new j.L,r.panEnd=new j.L,r.panDelta=new j.L,r.dollyStart=new j.L,r.dollyEnd=new j.L,r.dollyDelta=new j.L,r.panLeftV=new j.M,r.panUpV=new j.M,r.panInternalOffset=new j.M,r.onMouseDown=function(t){if(!1!==r.enabled){if(t.preventDefault(),t.button===r.mouseButtons.ORBIT){if(!1===r.enableRotate)return;r.rotateStart.set(t.clientX,t.clientY),r.state=at}else if(t.button===r.mouseButtons.ZOOM){if(!1===r.enableZoom)return;r.dollyStart.set(t.clientX,t.clientY),r.state=ct}else if(t.button===r.mouseButtons.PAN){if(!1===r.enablePan)return;r.panStart.set(t.clientX,t.clientY),r.state=ut}r.state!==st&&(document.addEventListener("mousemove",r.onMouseMove,!1),document.addEventListener("mouseup",r.onMouseUp,!1),r.dispatchEvent(mt))}},r.onMouseMove=function(t){if(!1!==r.enabled)if(t.preventDefault(),r.state===at){if(!1===r.enableRotate)return;r.rotateEnd.set(t.clientX,t.clientY),r.rotateDelta.subVectors(r.rotateEnd,r.rotateStart);var e=r.domElement===document?r.domElement.body:r.domElement;r.rotateLeft(2*Math.PI*r.rotateDelta.x/e.clientWidth*r.rotateSpeed),r.rotateUp(2*Math.PI*r.rotateDelta.y/e.clientHeight*r.rotateSpeed),r.rotateStart.copy(r.rotateEnd),r.update()}else if(r.state===ct){if(!1===r.enableZoom)return;r.dollyEnd.set(t.clientX,t.clientY),r.dollyDelta.subVectors(r.dollyEnd,r.dollyStart),r.dollyDelta.y>0?r.dollyIn(r.getZoomScale()):r.dollyDelta.y<0&&r.dollyOut(r.getZoomScale()),r.dollyStart.copy(r.dollyEnd),r.update()}else if(r.state===ut){if(!1===r.enablePan)return;r.panEnd.set(t.clientX,t.clientY),r.panDelta.subVectors(r.panEnd,r.panStart),r.pan(r.panDelta.x,r.panDelta.y),r.panStart.copy(r.panEnd),r.update()}},r.onMouseUp=function(t){!1!==r.enabled&&(document.removeEventListener("mousemove",r.onMouseMove,!1),document.removeEventListener("mouseup",r.onMouseUp,!1),r.dispatchEvent(ft),r.state=st)},r.onMouseWheel=function(t){!1===r.enabled||!1===r.enableZoom||r.state!==st&&r.state!==at||(t.preventDefault(),t.stopPropagation(),t.deltaY<0?r.dollyOut(r.getZoomScale()):t.deltaY>0&&r.dollyIn(r.getZoomScale()),r.update(),r.dispatchEvent(mt),r.dispatchEvent(ft))},r.onKeyDown=function(t){if(!1!==r.enabled&&!1!==r.enableKeys&&!1!==r.enablePan)switch(t.keyCode){case r.keys.UP:r.pan(0,r.keyPanSpeed),r.update();break;case r.keys.BOTTOM:r.pan(0,-r.keyPanSpeed),r.update();break;case r.keys.LEFT:r.pan(r.keyPanSpeed,0),r.update();break;case r.keys.RIGHT:r.pan(-r.keyPanSpeed,0),r.update()}},r.onTouchStart=function(t){if(!1!==r.enabled){switch(t.touches.length){case 1:if(!1===r.enableRotate)return;r.rotateStart.set(t.touches[0].pageX,t.touches[0].pageY),r.state=lt;break;case 2:if(!1===r.enableZoom)return;var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,o=Math.sqrt(e*e+n*n);r.dollyStart.set(0,o),r.state=ht;break;case 3:if(!1===r.enablePan)return;r.panStart.set(t.touches[0].pageX,t.touches[0].pageY),r.state=pt;break;default:r.state=st}r.state!==st&&r.dispatchEvent(mt)}},r.onTouchMove=function(t){if(!1!==r.enabled)switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:if(!1===r.enableRotate)return;if(r.state!==lt)return;r.rotateEnd.set(t.touches[0].pageX,t.touches[0].pageY),r.rotateDelta.subVectors(r.rotateEnd,r.rotateStart);var e=r.domElement===document?r.domElement.body:r.domElement;r.rotateLeft(2*Math.PI*r.rotateDelta.x/e.clientWidth*r.rotateSpeed),r.rotateUp(2*Math.PI*r.rotateDelta.y/e.clientHeight*r.rotateSpeed),r.rotateStart.copy(r.rotateEnd),r.update();break;case 2:if(!1===r.enableZoom)return;if(r.state!==ht)return;var n=t.touches[0].pageX-t.touches[1].pageX,o=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(n*n+o*o);r.dollyEnd.set(0,i),r.dollyDelta.subVectors(r.dollyEnd,r.dollyStart),r.dollyDelta.y>0?r.dollyOut(r.getZoomScale()):r.dollyDelta.y<0&&r.dollyIn(r.getZoomScale()),r.dollyStart.copy(r.dollyEnd),r.update();break;case 3:if(!1===r.enablePan)return;if(r.state!==pt)return;r.panEnd.set(t.touches[0].pageX,t.touches[0].pageY),r.panDelta.subVectors(r.panEnd,r.panStart),r.pan(r.panDelta.x,r.panDelta.y),r.panStart.copy(r.panEnd),r.update();break;default:r.state=st}},r.onTouchEnd=function(t){!1!==r.enabled&&(r.dispatchEvent(ft),r.state=st)},r.onContextMenu=function(t){t.preventDefault()},r.domElement.addEventListener("contextmenu",r.onContextMenu,!1),r.domElement.addEventListener("mousedown",r.onMouseDown,!1),r.domElement.addEventListener("wheel",r.onMouseWheel,!1),r.domElement.addEventListener("touchstart",r.onTouchStart,!1),r.domElement.addEventListener("touchend",r.onTouchEnd,!1),r.domElement.addEventListener("touchmove",r.onTouchMove,!1),r.window.addEventListener("keydown",r.onKeyDown,!1),r.update(),r}return it(e,t),e.prototype.update=function(){var t=this.object.position;return this.updateOffset.copy(t).sub(this.target),this.updateOffset.applyQuaternion(this.updateQuat),this.spherical.setFromVector3(this.updateOffset),this.autoRotate&&this.state===st&&this.rotateLeft(this.getAutoRotationAngle()),this.spherical.theta+=this.sphericalDelta.theta,this.spherical.phi+=this.sphericalDelta.phi,this.spherical.theta=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,this.spherical.theta)),this.spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this.spherical.phi)),this.spherical.makeSafe(),this.spherical.radius*=this.scale,this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius)),this.target.add(this.panOffset),this.updateOffset.setFromSpherical(this.spherical),this.updateOffset.applyQuaternion(this.updateQuatInverse),t.copy(this.target).add(this.updateOffset),this.object.lookAt(this.target),!0===this.enableDamping?(this.sphericalDelta.theta*=1-this.dampingFactor,this.sphericalDelta.phi*=1-this.dampingFactor):this.sphericalDelta.set(0,0,0),this.scale=1,this.panOffset.set(0,0,0),!!(this.zoomChanged||this.updateLastPosition.distanceToSquared(this.object.position)>1e-6||8*(1-this.updateLastQuaternion.dot(this.object.quaternion))>1e-6)&&(this.dispatchEvent(dt),this.updateLastPosition.copy(this.object.position),this.updateLastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0)},e.prototype.panLeft=function(t,e){this.panLeftV.setFromMatrixColumn(e,0),this.panLeftV.multiplyScalar(-t),this.panOffset.add(this.panLeftV)},e.prototype.panUp=function(t,e){this.panUpV.setFromMatrixColumn(e,1),this.panUpV.multiplyScalar(t),this.panOffset.add(this.panUpV)},e.prototype.pan=function(t,e){var n=this.domElement===document?this.domElement.body:this.domElement;if(this.object instanceof j.A){var o=this.object.position;this.panInternalOffset.copy(o).sub(this.target);var r=this.panInternalOffset.length();r*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*t*r/n.clientHeight,this.object.matrix),this.panUp(2*e*r/n.clientHeight,this.object.matrix)}else this.object instanceof j.z?(this.panLeft(t*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this.panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)},e.prototype.dollyIn=function(t){this.object instanceof j.A?this.scale/=t:this.object instanceof j.z?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*t)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)},e.prototype.dollyOut=function(t){this.object instanceof j.A?this.scale*=t:this.object instanceof j.z?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/t)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)},e.prototype.getAutoRotationAngle=function(){return 2*Math.PI/60/60*this.autoRotateSpeed},e.prototype.getZoomScale=function(){return Math.pow(.95,this.zoomSpeed)},e.prototype.rotateLeft=function(t){this.sphericalDelta.theta-=t},e.prototype.rotateUp=function(t){this.sphericalDelta.phi-=t},e.prototype.getPolarAngle=function(){return this.spherical.phi},e.prototype.getAzimuthalAngle=function(){return this.spherical.theta},e.prototype.dispose=function(){this.domElement.removeEventListener("contextmenu",this.onContextMenu,!1),this.domElement.removeEventListener("mousedown",this.onMouseDown,!1),this.domElement.removeEventListener("wheel",this.onMouseWheel,!1),this.domElement.removeEventListener("touchstart",this.onTouchStart,!1),this.domElement.removeEventListener("touchend",this.onTouchEnd,!1),this.domElement.removeEventListener("touchmove",this.onTouchMove,!1),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),this.window.removeEventListener("keydown",this.onKeyDown,!1)},e.prototype.reset=function(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(dt),this.update(),this.state=st},Object.defineProperty(e.prototype,"center",{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noZoom",{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(t){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!t},enumerable:!1,configurable:!0}),e}(j.m),gt=function(){function t(t,e){this.camera=t,this.rendererDOM=e,this.config={enableZoom:!0,enableDamping:!0,dampingFactor:.08,rotateSpeed:.3,zoomSpeed:.5},this.controlsCenter=new j.M}return t.prototype.createControls=function(){return this.controls=new yt(this.camera,this.rendererDOM),this.updateCenter(),this.setConfig(),this.controls},t.prototype.getControls=function(){return this.controls},t.prototype.updateCenter=function(){if(!this.controls)throw new Error("There is no controls!");var t=this.controlsCenter,e=t.x,n=t.y,o=t.z;this.controls.target.set(e,n,o)},t.prototype.setConfig=function(t){void 0===t&&(t={});I.extend(this.config,t);I.extend(this.controls,this.config)},t}(),bt=function(){function t(t){this.date=t,this.startDate=t,this.calcPerTick=1,this.actualCalcPerTick=1,this.secondsPerTick=1,this.deltaTIncrement=1,this.epochTime=t.getTime()}return Object.defineProperty(t.prototype,"currentTime",{get:function(){var t=this.date,e=t.getTime()+this.secondsPerTick;return this.date=new Date(e),this.epochTime=t.getTime(),this.date},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deltaT",{get:function(){return this.secondsPerTick},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"epochTime",{get:function(){return this._epochTime},set:function(t){this._epochTime=(t-w.getTime())/1e3},enumerable:!1,configurable:!0}),t.prototype.setDeltaT=function(){this.secondsPerTick<this.calcPerTick?this.actualCalcPerTick=this.secondsPerTick:this.actualCalcPerTick=this.calcPerTick,this.deltaTIncrement=Math.round(this.secondsPerTick/this.actualCalcPerTick),this.secondsPerTick=this.deltaTIncrement*this.actualCalcPerTick},t.prototype.setCalcPerTick=function(t){void 0===t&&(t=1),this.calcPerTick=t,this.setDeltaT()},t.prototype.setSecondsPerTick=function(t){void 0===t&&(t=1),this.secondsPerTick=t,this.setDeltaT()},t}(),vt=function(){function t(t){this.centerVector=new j.M,this.rendererSelector=t,this.rendererWidth=window.innerWidth,this.rendererHeight=window.innerHeight,this.rendererRatio=window.devicePixelRatio,this.setRenderer(t),this.stageSize=5e4,this.renderConfig={antialias:!0,preserveDrawingBuffer:!0,alpha:!0},this.date=new Date,this.scene=new j.H,this.currentSpaceTexture="milkyway",this.isPlaying=!1}return t.prototype.setWindow=function(t,e){this.rendererWidth=t,this.rendererHeight=e},t.prototype.setDimension=function(t){var e=t.smallest,n=t.largest;L.setLargestDimension(n),this.stageSize=L.getScaled(n),this.smallestSMA=e},t.prototype.calcDimension=function(t){var e={largest:0,smallest:0};if("starsystem"===t.system.type){var n=t.system;e.largest=n.planets.reduce((function(t,e){return e.orbit&&e.orbit.base.a>t?e.orbit.base.a:t}),0),e.smallest=n.planets.reduce((function(t,e){return e.orbit&&(!t||e.orbit.base.a<t)?e.orbit.base.a:t}),0)}else{if("planetsystem"!==t.system.type)throw new Error("Please check the scenario type!: calcDimension::World");n=t.system;e.largest=n.moons.reduce((function(t,e){return e.orbit&&e.orbit.base.a>t?e.orbit.base.a:t}),0),e.smallest=n.moons.reduce((function(t,e){return e.orbit&&(!t||e.orbit.base.a<t)?e.orbit.base.a:t}),0)}return e.largest*=1e3,e.smallest*=1e3,e},t.prototype.setRenderer=function(t){this.rendererDOMjQuery=I(t),this.rendererDOM=this.rendererDOMjQuery[0],this.rendererWidth=this.rendererDOMjQuery.width(),this.rendererHeight=this.rendererDOMjQuery.height()},t.prototype.setScenario=function(t){var e=this;this.date=t.startDate,this.startDate=t.startDate,this.setDimension(this.calcDimension(t)),this.scenario=new et(t);var n=this.scenario.getBodies();this.scene.add(n.center),n.others.forEach((function(t){return e.scene.add(t)}))},t.prototype.getScenario=function(){return this.scenario},t.prototype.create=function(){var t=this;this.scenario||console.error("You have to set any scenario first. use setScenario()"),this.renderer?console.error("There is no renderer!"):this.renderer=new j.O(this.renderConfig),this.renderer.setSize(this.rendererWidth,this.rendererHeight),this.renderer.setPixelRatio(this.rendererRatio),this.renderer.setClearColor(2236962,1);var e=new j.b(1118481);e.position.set(0,0,0),this.scene.add(e),this.raycaster=new j.F,this.mousePos=new j.L,this.rendererDOMjQuery.append(this.renderer.domElement),I(document).on("click",(function(e){t.onClick(e)})),this.initCamera(),this.initControls(),this.initSpacebox(),this.ticker=new bt(this.scenario.getStartDate()),this.ticker.setSecondsPerTick(this.scenario.getSecondsPerTick()),this.ticker.setCalcPerTick(this.scenario.getCalcPerTick()),this.setPlanets()},t.prototype.render=function(){var t=this,e=this.scenario.system.getCenter(),n=this.CameraManager.getAbsolutePosition();if(this.controls.update(),this.renderer.render(this.scene,this.currentCamera),e instanceof K){var o=e,r=this.centerVector,i=n.clone().sub(r).multiplyScalar(.1),s=o.getScreenSizeRatio(n,this.CameraManager.getConfig().fov);o.setFlarePosition(i),o.setFlareSize(s,this.rendererHeight),o.labelManager.updatePosition(o.compressedPos,this.currentCamera)}var a=this.scenario.getAstronomicalObjects(),c=new Date(this.ticker.epochTime);if(this.isPlaying){this.date=this.ticker.currentTime;var u=new Date(this.ticker.epochTime);a.center.moveRotating(u)}var l=a.others.map((function(e){return new Promise((function(n){t.isPlaying&&(e.moveRotating(c),e.setPositionByDate(c)),e.labelManager.updatePosition(e.compressedPos,t.currentCamera),n()}))}));return Promise.all(l)},t.prototype.setSecondsPerTick=function(t){this.ticker.setSecondsPerTick(t)},t.prototype.setCameraPosition=function(t){this.CameraManager.setCameraPosition(this.scenario,this.cameraPos,t),this.cameraPos=t},t.prototype.initCamera=function(){var t=this.rendererWidth/this.rendererHeight;this.CameraManager=new rt(this.scene,this.stageSize,t),this.CameraManager.init(),this.currentCamera=this.CameraManager.globalCamera,this.cameraPos="root",this.CameraManager.initCurrentCameraPosition()},t.prototype.initControls=function(){this.ControlsManager=new gt(this.currentCamera,this.rendererDOM),this.controls=this.ControlsManager.createControls()},t.prototype.initSpacebox=function(){var t="spacebox",e=(this.stageSize,{geometry:new j.I(6*this.stageSize,60,40),material:new j.v({color:new j.i(11184810),side:j.d,map:(new j.K).load("static/images/space/"+this.currentSpaceTexture+".jpg")})});e.mesh=new j.u(e.geometry,e.material),e.mesh.name=t,e.mesh.rotateX(90),this.scene.getObjectByName(t)&&this.scene.remove(this.scene.getObjectByName(t)),this.scene.add(e.mesh)},t.prototype.initHelper=function(){var t=new j.c(this.stageSize),e=new j.o(this.stageSize,this.stageSize/10);e.rotation.x=.5*Math.PI,this.scene.add(t,e)},t.prototype.setPlanets=function(){var t=this,e=new Date(this.ticker.epochTime);if(!this.scenario)throw new Error("There is no scenario: setPlanets::World");var n=this.scenario.getBodies();this.scene.add(n.center),n.others.forEach((function(e){return t.scene.add(e)})),this.scenario.getAstronomicalObjects().others.forEach((function(n){n.moveRotating(e),n.setPositionByDate(e),n.labelManager.updatePosition(n.compressedPos,t.currentCamera),n.hasTrace=!0}))},t.prototype.onClick=function(t){t.preventDefault(),this.mousePos.x=t.clientX/this.renderer.domElement.clientWidth*2-1,this.mousePos.y=-t.clientY/this.renderer.domElement.clientHeight*2+1;this.raycaster.intersectObjects(this.scene.children,!0)},t}(),wt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),jt=function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},Pt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rendererID="renderer",e}return wt(e,t),e.prototype.tick=function(){var t=this;this.world.render(),window.requestAnimationFrame((function(){return t.tick()})),this.isPlaying&&this.setCurrentDate(this.world.date)},e.prototype.loadWorld=function(){var t=this;z.load().then((function(e){t.world=new vt("#"+t.rendererID),t.world.isPlaying=t.isPlaying,t.world.setScenario(t.currentScenario),t.world.create(),t.world.setCameraPosition(t.currentCameraPosition),t.setCurrentDate(t.world.date),t.tick()}))},e.prototype.onChangeIsPlaying=function(t){this.world.isPlaying=t},e.prototype.onChangeCurrentCameraPosition=function(t){this.world.setCameraPosition(t)},e.prototype.onChangeCurrentSecondsPerTick=function(t){this.world.setSecondsPerTick(t)},e.prototype.mounted=function(){var t=this;this.$nextTick((function(){t.loadWorld()}))},jt([Object(x.b)("viewer/SET_CURRENT_DATE")],e.prototype,"setCurrentDate",void 0),jt([Object(x.c)((function(t){return t.viewer.currentScenario}))],e.prototype,"currentScenario",void 0),jt([Object(x.c)((function(t){return t.viewer.isPlaying}))],e.prototype,"isPlaying",void 0),jt([Object(x.c)((function(t){return t.viewer.currentCameraPosition}))],e.prototype,"currentCameraPosition",void 0),jt([Object(x.a)("viewer/GET_CURRENT_SCENARIO_SECONDS_PER_TICK")],e.prototype,"currentSecondsPerTick",void 0),jt([Object(s.c)("isPlaying")],e.prototype,"onChangeIsPlaying",null),jt([Object(s.c)("currentCameraPosition")],e.prototype,"onChangeCurrentCameraPosition",null),jt([Object(s.c)("currentSecondsPerTick")],e.prototype,"onChangeCurrentSecondsPerTick",null),e=jt([Object(s.a)({name:"GLRenderer"})],e)}(s.b),Ct=(n("FN2D"),Object(p.a)(Pt,(function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"renderer",attrs:{id:this.rendererID}})}),[],!1,null,"36bae040",null).exports),Ot=n("wd/R"),St=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Mt=function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},Et=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentScenarioId="",e.currentCameraPositionPlanetId="",e.currentTimesetIndex=-1,e}return St(e,t),Object.defineProperty(e.prototype,"currentTimeset",{get:function(){return this.timesets[this.currentTimesetIndex]},enumerable:!1,configurable:!0}),e.prototype.togglePlaying=function(){this.setPlaying(!this.isPlaying)},e.prototype.onChangeCurrentCameraPositionPlanetId=function(t){this.setCurrentCameraPosition(t)},e.prototype.onChangeCurrentTimeIndex=function(){this.currentTimeset&&this.setCurrentScenarioSecondsPerTick(this.currentTimeset.time)},e.prototype.created=function(){var t=this;this.currentScenarioId=this.currentScenario.id,this.currentCameraPositionPlanetId=this.currentCameraPosition,this.currentTimesetIndex=this.timesets.findIndex((function(e){return e.time===t.currentScenario.secondsPerTick}))},Mt([Object(x.c)("Viewer")],e.prototype,"viewerState",void 0),Mt([Object(x.c)((function(t){return t.viewer.isPlaying}))],e.prototype,"isPlaying",void 0),Mt([Object(x.c)((function(t){return t.viewer.currentDate}))],e.prototype,"currentDate",void 0),Mt([Object(x.c)((function(t){return t.viewer.currentScenario}))],e.prototype,"currentScenario",void 0),Mt([Object(x.c)((function(t){return t.viewer.currentCameraPosition}))],e.prototype,"currentCameraPosition",void 0),Mt([Object(x.c)((function(t){return t.viewer.timesets}))],e.prototype,"timesets",void 0),Mt([Object(x.b)("viewer/SET_CURRENT_CAMERA_POSITION")],e.prototype,"setCurrentCameraPosition",void 0),Mt([Object(x.b)("viewer/SET_PLAYING")],e.prototype,"setPlaying",void 0),Mt([Object(x.b)("viewer/SET_CURRENT_SCENARIO_SECONDS_PER_TICK")],e.prototype,"setCurrentScenarioSecondsPerTick",void 0),e=Mt([Object(s.a)({name:"ViewerTool",filters:{date:function(t){return Ot(t).format("YYYY-MM-DD HH:mm")}}})],e)}(s.b),Dt=(n("sRdh"),Object(p.a)(Et,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-row",{staticClass:"viewer-tool",attrs:{"align-h":"start"}},[n("div",{staticClass:"tool-wrapper",attrs:{"data-name":"play-button"}},[n("b-button",{staticClass:"playing-button",on:{click:t.togglePlaying}},[n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isPlaying,expression:"!isPlaying"}],staticClass:"xi-play"}),t._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:t.isPlaying,expression:"isPlaying"}],staticClass:"xi-pause"})])],1),t._v(" "),n("b-col",{staticClass:"tool-wrapper",attrs:{cols:"2","data-name":"time"}},[n("p",[t._v(t._s(t._f("date")(t.currentDate)))])]),t._v(" "),n("b-col",{staticClass:"tool-wrapper",attrs:{cols:"2","data-name":"timesets"}},[n("b-form-select",{on:{change:t.onChangeCurrentTimeIndex},model:{value:t.currentTimesetIndex,callback:function(e){t.currentTimesetIndex=e},expression:"currentTimesetIndex"}},t._l(t.timesets,(function(e,o){return n("option",{key:e.name,domProps:{value:o}},[t._v("\n                "+t._s(e.name)+"\n            ")])})),0)],1),t._v(" "),n("b-col",{staticClass:"tool-wrapper",attrs:{cols:"2","data-name":"camera-position"}},[n("b-form-select",{on:{change:t.onChangeCurrentCameraPositionPlanetId},model:{value:t.currentCameraPositionPlanetId,callback:function(e){t.currentCameraPositionPlanetId=e},expression:"currentCameraPositionPlanetId"}},[n("option",{attrs:{value:"root"}},[t._v("All Planets")]),t._v(" "),t._l(t.currentScenario.system.planets,(function(e){return n("option",{domProps:{value:e.id}},[t._v("\n                "+t._s(e.name)+"\n            ")])}))],2)],1)],1)}),[],!1,null,"42d3c12a",null).exports),Tt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),kt=function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},_t=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isPlaying=!1,e}return Tt(e,t),e.prototype.onChangePlaying=function(t){this.isPlaying=t},e=kt([Object(c.b)({name:"Viewer",components:{GLRenderer:Ct,ViewerTool:Dt}})],e)}(a.default),xt=(n("P5HX"),Object(p.a)(_t,(function(){var t=this.$createElement,e=this._self._c||t;return e("b-container",{attrs:{fluid:""}},[e("ViewerTool",{ref:"toolbar",on:{onChangePlaying:this.onChangePlaying}}),this._v(" "),e("GLRenderer",{ref:"renderer",attrs:{"is-playing":this.isPlaying}})],1)}),[],!1,null,null,null).exports);a.default.use(k.a),a.default.use(_.a);var Rt=new k.a({routes:[{path:"/",name:"Viewer",component:xt}]});n("m2JT");s.b.config.productionTip=!1,s.a.registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]),new s.b({el:"#app",store:T,router:Rt,template:"<App/>",components:{App:d}})}});
//# sourceMappingURL=app.d4a6d9a70eb2eb02481f.js.map